# コミュニケーションガイドライン

## 応答ガイドライン

### 情報提供時のルール

調べて欲しい、確認してほしい、教えてほしいなど情報を必要としている場合は、情報の提示のみを行い、変更しない

### 適用場面

#### 情報提供のみを行うべき場合
- 「調べて欲しい」
- 「確認してほしい」
- 「教えてほしい」
- 「どうなっているか知りたい」
- 「方法があるか調べて」
- その他、情報収集・確認を求められた場合

#### 対応方法
1. **情報の調査・収集を行う**
2. **調査結果を整理して提示する**
3. **ファイルの変更や更新は行わない**
4. **明示的な変更指示があった場合のみ変更を実行する**



### 提案時のルール

提案を行う際は、実際の変更は行わず、提案内容のみを提示する

### 誤った操作をした場合

誤って変更してしまった場合、または指示と異なる操作をした場合：

1. 変更を元に戻す
2. 正しい操作を実行する

謝罪のみで元に戻さないことは避ける。



## ドキュメント作成ガイドライン

### 文書作成の基本原則

#### 1. 初見の人でも理解できる文書作成

**チャットのコンテキストを理解しない、初見の人でもわかるように書く**

##### 適用場面
- 要件定義書
- 設計書
- 実装計画書
- README等の説明文書
- 技術仕様書

##### 具体的な対応方法

###### ❌ 悪い例（コンテキスト依存）
```markdown
## 概要
コア部分から順次拡張していく方式で、依存関係の問題を回避します。
DynamoDBとParameter Storeを使用せず、SAMテンプレートで設定を管理します。
```

###### ✅ 良い例（初見でも理解可能）
```markdown
## 概要
### 段階的実装アプローチ
基盤から順次構築する方式を採用し、以下の順序で実装します：
1. 基盤リソース（S3バケット、Secrets Manager等）- 他に依存しないリソース
2. IAMロール・ポリシー - 基盤リソースのARNを参照
3. Lambda関数 - IAMロールのARNを参照

この順序により、「まだ存在しないリソースを参照してしまう」問題を回避できます。

### アーキテクチャ方針
SAMテンプレートによる統一管理を採用し、設定値はすべてテンプレート内で管理します。
外部の設定ストア（DynamoDB、Parameter Store等）は使用せず、シンプルで保守しやすい構成とします。
```

##### チェックポイント
- [ ] 専門用語に説明を付けているか
- [ ] 「なぜそうするのか」の理由を説明しているか
- [ ] 具体例を示しているか
- [ ] 前提知識を仮定していないか
- [ ] 略語や内部用語を避けているか

#### 2. 段階的実装アプローチの明記

**一気に作るのではなく、ステップ毎に実装、確認、デプロイ等を小さく繰り返す**

##### 適用場面
- 実装計画書
- タスク定義
- デプロイ手順書
- 開発プロセス文書

##### 具体的な記載方法

###### 各段階の構成
```markdown
### Phase X: [段階名]

- [ ] X.1 [コンポーネント]の実装
  - 具体的な実装内容
  - 参照するリソースの明記
  - CFN Lint実行とテンプレート検証
  - **人間チェック**: [チェック内容]を確認
  - _要件: [関連要件]_

- [ ] X.2 [コンポーネント]のデプロイとテスト
  - sam deploy で[対象]をデプロイ
  - [具体的なテスト項目]
  - [テスト結果の確認方法]
  - [テスト結果レポート作成]
  - _要件: [関連要件]_
```

###### 段階的アプローチの説明
```markdown
## 実装アプローチ

### 段階的実装の利点
1. **リスク軽減**: 小さな単位でのデプロイにより、問題の早期発見が可能
2. **デバッグ容易**: 問題発生時の原因特定が簡単
3. **ロールバック安全**: 問題のある段階のみロールバック可能
4. **進捗確認**: 各段階での成果物確認により進捗が明確

### 各段階での作業フロー
1. **実装**: コードやテンプレートの作成
2. **検証**: CFN Lint、SAM validate等による品質チェック
3. **人間チェック**: デプロイ前の最終確認
4. **デプロイ**: 本番環境への適用
5. **テスト**: 動作確認とテスト結果記録
6. **次段階準備**: 次の段階で必要な情報の整理
```

##### チェックポイント
- [ ] 各段階が独立してテスト可能か
- [ ] 段階間の依存関係が明確か
- [ ] 各段階での成果物が定義されているか
- [ ] ロールバック手順が考慮されているか
- [ ] 人間チェックのタイミングが適切か

## 仕様変更時のクリーンアップルール

### 原則

**仕様を変更したら、不要になった記載は消すこと**

### 適用場面

#### 要件変更時
- 削除された機能の要件は完全に削除
- 変更された要件は新しい内容に置き換え
- 関連する受け入れ基準も更新・削除

#### 設計変更時
- 使用しなくなったコンポーネントの記載を削除
- 変更されたアーキテクチャ図を更新
- 不要になった技術仕様を削除
- 古いデータフローの説明を削除

#### 実装計画変更時
- 実装しないタスクは削除
- 変更されたタスクは新しい内容に更新
- 依存関係が変わったタスクの説明を修正

### チェックポイント

1. **一貫性確保**: 文書全体で矛盾がないか確認
2. **不要な記載**: 現在の仕様に関係ない内容がないか確認
3. **参照整合性**: 削除した要素への参照が残っていないか確認
4. **図表更新**: アーキテクチャ図やフロー図が最新の仕様を反映しているか確認

### 例

#### ❌ 悪い例
```markdown
# 要件1: Google Analytics、S3、CloudFrontログの収集
# 要件2: Google Analyticsデータの収集（スモールスタート）
```

#### ✅ 良い例
```markdown
# 要件1: Google Analyticsデータの収集（スモールスタート）
```

このルールに従い、常に最新の仕様のみが文書に記載されている状態を維持する。

## 文書レビューチェックリスト

### 初見理解度チェック
- [ ] 専門用語に説明があるか
- [ ] 背景・理由が説明されているか
- [ ] 具体例が示されているか
- [ ] 前提知識を仮定していないか

### 段階的実装チェック
- [ ] 実装順序が論理的か
- [ ] 各段階が独立してテスト可能か
- [ ] 人間チェックポイントが明確か
- [ ] ロールバック方法が考慮されているか

## README作成ガイドライン

### README作成の基本原則

#### 汎用ドキュメント作成ガイドライン

##### 前提条件セクションの書き方
- **目的**: プロジェクト固有のデプロイ要件をリスト化
- **コンテンツルール**:
  - ✅ 含める: プロジェクト固有の要件（証明書、ドメイン名、既存リソース）
  - ❌ 除外: 一般的な要件（CLI、基本権限、一般的な知識）
- **英語形式**:
  ```markdown
  ## Prerequisites
  
  Before deploying this [project/template/application], ensure you have:
  
  - Project-specific requirement 1
  - Project-specific requirement 2
  ```
- **日本語形式**:
  ```markdown
  ## 前提条件
  
  デプロイの前に以下を準備してください。
  
  - プロジェクト固有の要件 1
  - プロジェクト固有の要件 2
  ```

##### トラブルシューティングセクションの書き方
- **目的**: プロジェクト固有の問題の解決策を提供
- **配置**: ドキュメントの最後
- **コンテンツルール**:
  - ✅ 含める: プロジェクト固有の問題と解決策
  - ❌ 除外: 一般的なトラブルシューティング、基本的な問題
- **構造**: コンポーネントまたは問題タイプ別に整理
- **英語形式**:
  ```markdown
  ## Troubleshooting
  
  ### Specific Issue Category
  
  If you encounter [specific problem]:
  
  1. Step 1 to resolve
  2. Step 2 to resolve
  3. Step 3 to resolve
  ```
- **日本語形式**:
  ```markdown
  ## トラブルシューティング
  
  ### 固有の問題カテゴリ
  
  [具体的な問題] が発生した場合：
  
  1. 解決手順 1
  2. 解決手順 2
  3. 解決手順 3
  ```

#### 日本語ドキュメント固有のガイドライン

##### 1. スペーシングルール
日本語テキストと英語単語・略語の間にスペースを追加
- **例**:
  - ❌ `アプリケーション用に設定されたOAuth 2.0認証情報`
  - ✅ `アプリケーション用に設定された OAuth 2.0 認証情報`
  - ❌ `CloudFrontディストリビューション`
  - ✅ `CloudFront ディストリビューション`
  - ❌ `VPCとサブネット`
  - ✅ `VPC とサブネット`

##### 2. 用語の一貫性
- **サービス名**: 技術サービス名は適切なスペーシングで英語のまま保持
  - ✅ `Amazon S3 バケット`
  - ✅ `AWS Lambda 関数`
  - ✅ `Docker コンテナ`
- **技術用語**: 一貫した日本語翻訳を使用
  - `deployment` → `デプロイ`
  - `template` → `テンプレート`
  - `parameter` → `パラメータ`
  - `troubleshooting` → `トラブルシューティング`

##### 3. 文章構造
- **前提条件**: 常に`デプロイの前に以下を準備してください。`で開始
- **トラブルシューティング**: `[問題] が発生した場合：`形式を使用
- **説明**: フォーマルだがアクセスしやすいトーンを維持



## 例外事項

### 内部向け技術文書の場合
- チーム内の共通理解がある専門用語は説明を省略可能
- ただし、新メンバーが参加することを考慮して最小限の説明は含める

### 緊急対応文書の場合
- 段階的実装よりも迅速性を優先する場合がある
- ただし、可能な限り検証ステップは含める

### README作成の例外
- 情報が不十分な場合は新標準形式を適用しない
- 混乱を招く可能性がある場合はシンプルな形式を維持
- テンプレートが存在しないサービスは基本構造のみでREADME作成