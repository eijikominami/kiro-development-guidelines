# Git 操作ガイドライン

## 基本原則

### 破壊的操作の禁止

コミットされていないローカルの変更を含むディレクトリやファイルを削除してはならない

#### 禁止される操作
- ❌ `rm -rf [directory]` - Git 管理下のディレクトリの強制削除
- ❌ `git reset --hard` - 作業ディレクトリの変更を破棄（状態確認後のみ実行可）
- ❌ `git clean -fd` - 未追跡ファイルの削除（状態確認後のみ実行可）
- ❌ サブモジュールディレクトリの直接削除

### 変更を元に戻す際の原則

誤った操作をした場合、元に戻す際も破壊的操作を避ける。

#### 禁止される戻し方
- ❌ リモートから取得して、ローカルの変更を上書き（`git reset --hard origin/main`）
- ❌ ディレクトリを削除して、リモートからクローン
- ❌ `git pull` で強制的にリモートの状態に合わせる

#### 安全な戻し方
1. `git status` で現在の状態を確認
2. ローカルの変更を stash または別ブランチに保存
3. 誤った変更のみを取り消す（`git revert` または `strReplace` で修正）
4. 必要に応じて stash を復元

#### 不明な場合

元に戻す方法が不明な場合、または複雑な状況の場合は、操作を実行する前にユーザーに確認する。慌てて作業しない。

ブランチ戦略やワークフローは `development-guidelines.md` を参照

## サブモジュール操作の原則

### 破壊的操作の禁止

サブモジュールディレクトリを `rm -rf` で削除してはならない。ローカルの変更が完全に失われる。

### サブモジュール操作前の確認

サブモジュールを操作する前に、サブモジュール内の変更を確認する：

```bash
cd [submodule-path]
git status
```

未コミットの変更がある場合は、コミットしてリモートに Push する。

## チェックリスト

### サブモジュール操作前の確認
- [ ] サブモジュール内の変更を確認: `cd [submodule] && git status`
- [ ] 未コミットの変更がある場合はコミット
- [ ] サブモジュールのリモート設定を確認: `git remote -v`
- [ ] 親リポジトリの状態を確認: `cd .. && git status`
- [ ] `.gitmodules` の内容を確認
- [ ] 変更はリモートに Push

### 破壊的操作前の確認
- [ ] `git status` で現在の状態を確認
- [ ] 未コミットの変更がないか確認
- [ ] 操作の影響範囲を理解している
- [ ] バックアップまたはコミット済み
- [ ] 本当にこの操作が必要か再確認


